# 专业知识

## 核心基础

### JavaScript 如何实现继承 #03

#### `__proto__` 和 `prototype` 的关系是什么？

构造函数的 `prototype` 和其实例的 `__proto__` 指向的是同一对象。

#### JS 中的对象是如何实现继承的？

一个实例对象可以通过其 `__proto__` 属性访问到它的原型对象，也便继承到了其原型对象的属性和方法。

#### JS 是如何访问对象的方法和属性的？（原型链查找问题）

是基于原型链查找的。  
先在自身上查找，找不到会到其 `__proto__` 上查找，找不到继续向上。若直至 `null` （`Object.prototype.__proto__`）还没有找到，会返回 `undefined`

### JavaScript 引擎如何执行 JavaScript 代码 #04

#### JS 运行的各个阶段

1. 语法分析阶段：检查语法错误（编译器通用内容）
2. **编译阶段**：创建执行上下文，包括创建变量对象、建立作用域链、确定this 指向等。
3. 执行阶段：

执行阶段会创建变量对象（Variable Object），对象值为 undefined，且处于不可访问的状态

在执行阶段，变量对象被激活为 Active Object：变量属性被赋值；添加函数执行时传入的实参和 arguments 对象。

这便是变量提升（var）的原因所在。一个带赋值的变量声明，其定义在编译阶段完成，而赋值声明则在执行阶段完成。

#### 执行上下文的创建（编译阶段）

##### 创建变量对象

作用域有动态和静态之分。JS 使用的是静态的，也叫词法作用域。

从 ES 6 开始，使用“词法环境（Lexical Environment）”来描述作用域或者当前的执行上下文。它又分为两种：

- 变量环境：记录 var、function 等变量声明；
- 词法环境：记录 let、const、class 等变量声明。（ES 6新加入）

通过以上两个环境分别记录**不同**的声明内容，JS 实现了支持块级作用域且不影响原有的变量声明和函数声明。

##### 建立作用域链

一个词法环境由两个成员组成：

- 环境记录（Environment Record）：记录自身词法环境中的变量对象
- 外部词法环境引用（Outer Lexical Environment）：记录外层词法环境的引用

作用域链便有赖于外部词法环境引用。

###### 闭包

##### 确定this指向

### 单线程的 JavaScript 如何管理任务 #05

JS 的基于事件循环的并发模型：事件循环机制（Event Loop），它解决了异步任务的同步问题。

#### Event Loop

执行**栈**（Call Stack）：先进后出（FILO）  
	新调用的函数加入栈顶  
	函数调用栈栈底永远是全局执行上下文，栈顶则永远是当前执行上下文。

任务**列队**（Callback Queue）：先进先出（FIFO）  
	新任务加入队尾  
执行栈清空后，主线程处于空闲，此时会从任务列队获取任务。

##### Node.js 中的 Event Loop

Node.js 中的事件循环分为六个阶段，每个阶段完成之后都会检查异步队列。

#### 宏任务和微任务

异步任务队列中还区分宏微：

- 宏任务：setTimeout、setInterval、I/O操作

- 微任务：Promise、MutationObserver

宏任务一次执行一个，执行完后会清空微任务队列，再执行下一个宏任务。微任务清空后会执行UI渲染操作、更新界面。

### 理解浏览器 #06

#### 网络请求是如何进行的？

##### 跨域问题及其方法

##### HTTP 请求与 TCP

目前大多数 HTTP 请求都是基于 TCP 协议。TCP 协议的目的是提供可靠的数据传输，它用来确保可靠传输的途径主要包括两个：

- 乱序重建：通过对数据包编号来对其排序，从而使得另一端接收数据时，可以重新根据编号还原顺序。

- 丢包重试：可通过发送方是否得到响应，来检测出丢失的数据并重传这些数据。

##### Ajax 异步请求

Ajax 解决了同步请求阻塞页面进程的问题。



## 能力进阶

### 代码构建与 Webpack 必备技能 #13

前端项目模块化

#### 模块规范

- CommonJS (Node.js)  
  require() 载入；module.export 导出  
  不支持异步加载
- AMD 异步模块定义（浏览器）  
  解决异步加载
- UMD 通用模块定义  
  综合 CommonJS 和 AMD，带有对运行环境的判断，以作不同的导出。
- ES6 模块  
  import 载入；export 导出  
  只能被导出一次。  
  能在编译阶段确定模块依赖关系。  
  需要进行 Babel 编译和 Webpack 打包（代码构建）

#### Webpack

##### loader

##### plugins

### HTTP 协议 #07

#### HTTP 的演进

- 1.0 → 1.1
  - 1.0：每一对 HTTP 请求和相应都需要打开一个单独的 TCP 连接。
  - 1.1：引入持久连接，通过设置 Connection 头部为 keep-alive 复用 TCP 连接。
- 

#### Cookie

#### 缓存

#### C/S 双向通信

##### HTTP 短轮询（polling）

##### HTTP 长轮询（long-polling）

